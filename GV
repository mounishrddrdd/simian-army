# These are Lines form monit to check pid file
# If application crashes, monit will restart it again.
class platforms::monit::globalvehicle {
include ::monit
  monit::check { 'global-vehicle-services':
    content => 'check process global-vehicle with pidfile /opt/apps//global-vehicle-services/bin/GlobalVehicleServices.pid
start program = "/bin/su - app -c \'/opt/apps/global-vehicle-services/bin/run.sh start\' "
stop  program = "/bin/su - app -c \'/opt/apps/global-vehicle-services/bin/run.sh stop\' "
if failed unix /opt/apps//global-vehicle-services/bin/GlobalVehicleServices then exec "/etc/monit/pagerduty-trigger global-vehicle-services"
	else if succeeded then exec "/etc/monit/pagerduty-resolve global-vehicle-services"
',
  }
}
